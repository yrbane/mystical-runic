<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtres & Helpers - Mystical-Runic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Highlight.js for Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
        }
        .container {
            max-width: 1200px;
        }
        .sidebar {
            background-color: #2d3748; /* Darker sidebar */
            border-right: 1px solid #4a5568; /* Subtle border */
        }
        .nav-link {
            color: #a0aec0; /* Lighter grey for links */
            display: flex;
            align-items: center;
        }
        .nav-link:hover {
            color: #cbd5e0; /* Even lighter on hover */
            background-color: #4a5568; /* Slightly lighter background on hover */
        }
        .nav-link i {
            margin-right: 0.75rem; /* Space between icon and text */
            width: 1.25rem; /* Fixed width for icons */
            text-align: center;
        }
        h1, h2, h3, h4 {
            color: #63b3ed; /* Blue headings */
            font-weight: 700; /* Bold headings */
        }
        h1 {
            font-size: 2.5rem; /* Larger H1 */
        }
        h2 {
            font-size: 2rem; /* Larger H2 */
        }
        h3 {
            font-size: 1.75rem; /* Larger H3 */
        }
        code {
            background-color: #2d3748;
            color: #f6e05e; /* Yellow for code */
            padding: 0.2em 0.4em;
            border-radius: 0.25rem;
        }
        pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1em;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1.5rem; /* More space below code blocks */
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        /* Specific styles for highlight.js */
        .hljs {
            background: #2d3748 !important; /* Ensure background matches pre */
            color: #e2e8f0 !important; /* Ensure text color matches pre */
        }
    </style>
</head>
<body class="flex">
    <!-- Sidebar -->
    <aside class="sidebar w-64 p-6 h-screen overflow-y-auto shadow-lg flex-shrink-0">
        <h2 class="text-2xl font-bold mb-6 text-white"><i class="fas fa-hat-wizard"></i> Mystical-Runic</h2>
        <nav>
            <ul>
                <li class="mb-2"><a href="../index.html" class="nav-link block py-2 px-4 rounded transition duration-200"><i class="fas fa-home"></i> Accueil</a></li>
                <li class="mb-2"><a href="../installation.html" class="nav-link block py-2 px-4 rounded transition duration-200"><i class="fas fa-download"></i> Installation</a></li>
                <li class="mb-2">
                    <h3 class="text-lg font-semibold text-gray-400 mb-2"><i class="fas fa-lightbulb"></i> Concepts Clés</h3>
                    <ul>
                        <li class="mb-1 ml-4"><a href="overview.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-eye"></i> Vue d'ensemble</a></li>
                        <li class="mb-1 ml-4"><a href="templating_syntax.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-code"></i> Syntaxe de Templating</a></li>
                        <li class="mb-1 ml-4"><a href="data_structures.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-database"></i> Structures de Données</a></li>
                        <li class="mb-1 ml-4"><a href="security_performance.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-shield-alt"></i> Sécurité & Performance</a></li>
                        <li class="mb-1 ml-4"><a href="filters_helpers.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-filter"></i> Filtres & Helpers</a></li>
                    </ul>
                </li>
                <li class="mb-2">
                    <h3 class="text-lg font-semibold text-gray-400 mb-2"><i class="fas fa-book"></i> Référence API</h3>
                    <ul>
                        <li class="mb-1 ml-4"><a href="../api/overview.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-sitemap"></i> Vue d'ensemble API</a></li>
                        <li class="mb-1 ml-4"><a href="../api/functions/template_engine.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-cogs"></i> TemplateEngine</a></li>
                        <li class="mb-1 ml-4"><a href="../api/functions/template_context.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-box"></i> TemplateContext</a></li>
                        <li class="mb-1 ml-4"><a href="../api/functions/template_value.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-cube"></i> TemplateValue</a></li>
                        <li class="mb-1 ml-4"><a href="../api/functions/template_error.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-exclamation-triangle"></i> TemplateError</a></li>
                        <li class="mb-1 ml-4"><a href="../api/functions/filter_function.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-magic"></i> FilterFunction</a></li>
                        <li class="mb-1 ml-4"><a href="../api/functions/helper_function.html" class="nav-link block py-1 px-2 rounded transition duration-200"><i class="fas fa-hat-wizard"></i> HelperFunction</a></li>
                    </ul>
                </li>
                <li class="mb-2"><a href="../examples.html" class="nav-link block py-2 px-4 rounded transition duration-200"><i class="fas fa-file-code"></i> Exemples</a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-10 overflow-y-auto">
        <div class="container mx-auto">
            <h1 class="text-4xl font-extrabold mb-6">Filtres & Helpers</h1>
            <p class="text-lg mb-4 leading-relaxed">Mystical-Runic offre des mécanismes puissants pour transformer les données et étendre les fonctionnalités de templating directement depuis vos templates : les filtres et les helpers. Ils permettent d'ajouter de la logique et de la réutilisabilité à vos templates sans avoir à modifier le code Rust sous-jacent.</p>

            <h2 class="text-3xl font-bold mb-4">Filtres</h2>
            <p class="mb-2 leading-relaxed">Les filtres sont des fonctions qui transforment la valeur d'une variable avant qu'elle ne soit affichée. Ils sont appliqués en utilisant la syntaxe <code>{{ variable | filtre }}</code> ou <code>{{ variable | filtre(arg1, arg2) }}</code> si le filtre accepte des arguments.</p>

            <h3 class="text-2xl font-bold mb-3">Filtres Intégrés</h3>
            <p class="mb-4 leading-relaxed">Mystical-Runic inclut une série de filtres intégrés pour les transformations courantes, couvrant des besoins variés allant de la manipulation de chaînes de caractères au formatage de nombres et de dates :</p>
            <ul class="list-disc pl-5 text-lg mb-4 space-y-1">
                <li><i class="fas fa-font text-gray-400"></i> <code>upper</code> : Convertit une chaîne de caractères en majuscules.</li>
                <li><i class="fas fa-font text-gray-400"></i> <code>lower</code> : Convertit une chaîne de caractères en minuscules.</li>
                <li><i class="fas fa-money-bill-wave text-gray-400"></i> <code>currency</code> : Formate un nombre en devise selon une locale ou un symbole donné.</li>
                <li><i class="fas fa-cut text-gray-400"></i> <code>truncate</code> : Tronque une chaîne de caractères à une longueur spécifiée, ajoutant éventuellement des points de suspension.</li>
                <li><i class="fas fa-calendar-alt text-gray-400"></i> <code>date</code> : Formate une date selon un format donné (par exemple, <code>"%Y-%m-%d"</code>).</li>
                <li><i class="fas fa-calculator text-gray-400"></i> Opérations mathématiques : Des filtres pour des opérations comme l'addition, la soustraction, la multiplication, la division, le modulo, etc.</li>
                <li>Et bien d'autres filtres utilitaires pour la manipulation de listes, la vérification de types, etc.</li>
            </ul>
            <pre><code class="language-html">{{ product.name | upper }}
{{ price | currency("EUR") }}
{{ description | truncate(100, "...") }}
{{ event.date | date("%d/%m/%Y") }}</code></pre>

            <h3 class="text-2xl font-bold mb-3">API de Filtre Personnalisée (<code>FilterFunction</code>)</h3>
            <p class="mb-4 leading-relaxed">Vous n'êtes pas limité aux filtres intégrés. Mystical-Runic vous permet de définir vos propres filtres personnalisés en implémentant le trait <code>FilterFunction</code>. Cela vous offre une flexibilité immense pour ajouter des logiques de transformation spécifiques à votre application directement dans le moteur de template.</p>
            <pre><code class="language-rust">
pub type FilterFunction = Box&lt;dyn Fn(&TemplateValue, Vec&lt;TemplateValue&gt;) -> TemplateResult&lt;TemplateValue&gt; + Send + Sync&gt;;
</code></pre>
            <p class="mb-4 leading-relaxed">Ce type représente une fonction qui prend la valeur à filtrer (<code>&TemplateValue</code>) et une liste d'arguments (<code>Vec&lt;TemplateValue&gt;</code>) passés au filtre, et retourne le résultat filtré (<code>TemplateResult&lt;TemplateValue&gt;</code>) ou une erreur.</p>

            <h2 class="text-3xl font-bold mb-4">Helpers</h2>
            <p class="mb-2 leading-relaxed">Les helpers (ou fonctions d'aide) sont des blocs de logique réutilisables qui peuvent être appelés depuis vos templates. Ils sont généralement plus puissants et plus complexes que les filtres car ils peuvent prendre plusieurs arguments, interagir avec le contexte de rendu, et même modifier le comportement du moteur de template. Ils sont parfaits pour des macros réutilisables, des fonctions utilitaires complexes ou l'intégration de logiques métier spécifiques.</p>
            <pre><code class="language-rust">
pub type HelperFunction = Box&lt;dyn Fn(&TemplateContext, &mut TemplateEngine, &str, Vec&lt;TemplateValue&gt;) -> TemplateResult&lt;TemplateValue&gt; + Send + Sync&gt;;
</code></pre>
            <p class="mb-4 leading-relaxed">Ce type représente une fonction qui a accès au <code>TemplateContext</code> actuel, au <code>TemplateEngine</code> (pour des opérations avancées comme le rendu d'autres templates), le nom du helper, et ses arguments. Il retourne également un <code>TemplateResult&lt;TemplateValue&gt;</code>.</p>
            <p class="mb-4 leading-relaxed">Vous pouvez enregistrer vos helpers avec le <code>TemplateEngine</code> et les appeler dans vos templates en utilisant une syntaxe similaire à celle des fonctions : <code>{{mon_helper arg1 arg2}}</code>.</p>
        </div>
    </main>
    <!-- Highlight.js Initialization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>